ì¢‹ì•„, Replit AIì— ê·¸ëŒ€ë¡œ ë˜ì§€ë©´ ë˜ëŠ” **ìš”ì²­ì„œ** ê¹”ë”í•˜ê²Œ ì •ë¦¬í•´ì¤„ê²Œ. ë³µë¶™í•´ì„œ ì“°ë©´ ëœë‹¤.

---

# ğŸ“Œ Replit AI ìš”ì²­ì‚¬í•­

## 1) ëª©í‘œ

ì¹´ì¹´ì˜¤ë§µ ê¸°ë°˜ **ë™ì  ë§ˆì»¤ ì‹œìŠ¤í…œ** êµ¬í˜„.

* **ë ˆë²¨ 1â€“5:** ê°œë³„ ë§¤ì¥ ë§ˆì»¤ë§Œ í‘œì‹œ
* **ë ˆë²¨ 6â€“7:** ì/ë©´/ë™ ì§‘ê³„ ë§ˆì»¤ë§Œ í‘œì‹œ
* **ë ˆë²¨ 8â€“9:** ì‹œ/êµ°/êµ¬ ì§‘ê³„ ë§ˆì»¤ë§Œ í‘œì‹œ
* **ë ˆë²¨ 10+:** ì‹œ/ë„ ì§‘ê³„ ë§ˆì»¤ë§Œ í‘œì‹œ
  â†’ ì–´ë–¤ ë ˆë²¨ì—ì„œë„ **ê°œë³„ ë§ˆì»¤ì™€ ì§‘ê³„ ë§ˆì»¤ê°€ ë™ì‹œì— ë³´ì´ë©´ ì•ˆ ë¨.**

## 2) í˜„ì¬ ë¬¸ì œ

* ëª¨ë“  ë ˆë²¨ì—ì„œ ê°œë³„ ë§¤ì¥ ë§ˆì»¤(524ê°œ)ê°€ ê³„ì† ìƒì„±ë¨.
* ì§€ì—­ ì§‘ê³„ ë§ˆì»¤ì™€ ê°œë³„ ë§ˆì»¤ê°€ **ë™ì‹œì—** í‘œì‹œë¨.
* ì£¼ì†Œ íŒŒì‹± í•¨ìˆ˜ê°€ í•œêµ­ ì£¼ì†Œë¥¼ ì œëŒ€ë¡œ ë¶„í•´í•˜ì§€ ëª»í•´ â€˜ë¯¸ìƒâ€™ì´ ë‹¤ëŸ‰ ë°œìƒ.
* ë ˆë²¨ ë³€ê²½ ì´ë²¤íŠ¸ê°€ ìˆì–´ë„ ì‹¤ì œ í‘œì‹œ ì „í™˜ì´ ì¼ê´€ë˜ì§€ ì•ŠìŒ.

## 3) êµ¬í˜„ ìš”êµ¬ (í•µì‹¬ ì„¤ê³„)

### A. ë ˆì´ì–´ ë¶„ë¦¬ & ë‹¨ì¼ ì „í™˜ ìŠ¤ìœ„ì¹˜

* ì „ì—­ ìƒíƒœ:

  * `TL_STATE = { currentMode: null, storeMarkers: [], regionOverlays: [], regionCache: { dong:null, sigungu:null, sido:null } }`
* **ê°œë³„**: `storeMarkers` (í•œ ë²ˆë§Œ ìƒì„± â†’ show/hide)
* **ì§‘ê³„**: `regionOverlays` (ë ˆë²¨ í‹°ì–´ë³„ ê·¸ë£¹ ê²°ê³¼ë¡œ ìƒì„± â†’ show/hide)
* **ì „í™˜ì€ í•œ ê³³ì—ì„œë§Œ** ìˆ˜í–‰: `handleMapLevelChange(map, stores)`

  * ëª¨ë“œ íŒì •: `getModeByLevel(level)` â†’ `'store' | 'region'`
  * ì§‘ê³„ í‹°ì–´ íŒì •: `getRegionTierByLevel(level)` â†’ `'dong' | 'sigungu' | 'sido'`
  * ì „í™˜ ì‹œ ì„œë¡œ ë°˜ëŒ€ ë ˆì´ì–´ëŠ” í•­ìƒ **hide**.

### B. ì£¼ì†Œ íŒŒì‹±(í•œêµ­í˜•) ê°œì„ 

* ì…ë ¥ ì˜ˆ: `ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123 (ì—­ì‚¼ë™, â—‹â—‹ë¹Œë”©)`
* ë¡œì§:

  * ì‹œ/ë„: ì •ê·œì‹ìœ¼ë¡œ 1ì°¨ ì¶”ì¶œ
  * ì‹œ/êµ°/êµ¬: ì‹œ/ë„ ë’¤ êµ¬ê°„ì—ì„œ ì¶”ì¶œ
  * ë™: ê´„í˜¸ ì† `â—‹â—‹ë™` **ìš°ì„ **, ì—†ìœ¼ë©´ ë³¸ë¬¸ì—ì„œ `(ì|ë©´|ë™)` ì¶”ì¶œ
  * ì‹¤íŒ¨ ì‹œ `'ë¯¸ìƒ'`
* í•¨ìˆ˜: `parseKoreanAddress(address) -> { sido, sigungu, dong }`

### C. ê·¸ë£¹í•‘ & ì§‘ê³„ ì¢Œí‘œ

* `groupStoresByTier(stores, tier)` â†’ Mapìœ¼ë¡œ ë¬¶ê³ , ê° ê·¸ë£¹ ì„¼íŠ¸ë¡œì´ë“œ(lat/lng í‰ê· )ì™€ count ê³„ì‚°.
* ê²°ê³¼: `{ key, lat, lng, count, items[] }[]`

### D. ë§ˆì»¤/ì˜¤ë²„ë ˆì´ ìƒì„± & í† ê¸€

* `buildStoreMarkers(stores, map)` : **ì´ë¯¸ ìƒì„±ë¼ ìˆìœ¼ë©´ ì¬ìƒì„± ê¸ˆì§€**, ìµœì´ˆ 1íšŒë§Œ.
* `showStoreMarkers(map) / hideStoreMarkers()`
* `buildRegionOverlaysFromGroups(groups, map)` : ìƒì„± ì „ `clearRegionOverlays()`ë¡œ ì‹¹ ì •ë¦¬.
* `showRegionOverlays(map) / hideRegionOverlays()`
* ë ˆë²¨/ì¤Œ ë³€ê²½ ì´ë²¤íŠ¸ëŠ” **ë””ë°”ìš´ìŠ¤**(`100~150ms`) ì ìš©.

### E. ì´ë²¤íŠ¸ ì—°ê²° & ì´ˆê¸°í™”

* `initMapWithMarkers(map, stores)`:

  1. `buildStoreMarkers`ë¡œ ì„ ìƒì„±(í‘œì‹œëŠ” ì•ˆ í•¨)
  2. `handleMapLevelChange(map, stores)` ìµœì´ˆ 1íšŒ í˜¸ì¶œ
  3. `zoom_changed`(í•„ìš”ì‹œ `idle` ì¶”ê°€)ì—ì„œ `handleMapLevelChange`ë§Œ í˜¸ì¶œ

## 4) í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜(ê³ ì • ìš”ì²­)

* `getModeByLevel(level): 'store' | 'region'`
* `getRegionTierByLevel(level): 'dong' | 'sigungu' | 'sido'`
* `parseKoreanAddress(addr): {sido, sigungu, dong}`
* `groupStoresByTier(stores, tier): Group[]`
* `buildStoreMarkers(stores, map): Promise<void>`
* `showStoreMarkers(map): void`
* `hideStoreMarkers(): void`
* `buildRegionOverlaysFromGroups(groups, map): void`
* `clearRegionOverlays(): void`
* `showRegionOverlays(map): void`
* `hideRegionOverlays(): void`
* `handleMapLevelChange(map, stores): void`  â† **ìœ ì¼í•œ ì „í™˜ ìŠ¤ìœ„ì¹˜**
* `initMapWithMarkers(map, stores): Promise<void>`

## 5) ìˆ˜ìš© ê¸°ì¤€(í•„ìˆ˜ í…ŒìŠ¤íŠ¸)

1. ë ˆë²¨ 1â€“5ì—ì„œ **ì§‘ê³„ ë§ˆì»¤ 0**, ê°œë³„ ë§ˆì»¤ë§Œ í‘œì‹œ.
2. ë ˆë²¨ 6â€“7ì—ì„œ **ê°œë³„ ë§ˆì»¤ 0**, **ì/ë©´/ë™ ì§‘ê³„ë§Œ** í‘œì‹œ.
3. ë ˆë²¨ 8â€“9ì—ì„œ **ì‹œ/êµ°/êµ¬ ì§‘ê³„ë§Œ** í‘œì‹œ.
4. ë ˆë²¨ 10+ì—ì„œ **ì‹œ/ë„ ì§‘ê³„ë§Œ** í‘œì‹œ.
5. ê°™ì€ ë ˆë²¨ êµ¬ê°„ ë‚´ì—ì„œ ì¤Œ ì¸/ì•„ì›ƒ ë°˜ë³µ ì‹œ **ë¶ˆí•„ìš”í•œ ì¬ìƒì„± ì—†ìŒ**(storeMarkersëŠ” ìµœì´ˆ 1íšŒ ìƒì„±, ì§‘ê³„ëŠ” ìºì‹œ í™œìš©).
6. ì£¼ì†Œì— ê´„í˜¸ ë™ì´ ìˆì„ ë•Œ ë™ë‹¨ìœ„ ì§‘ê³„ ì •í™•íˆ ë°˜ì˜.
7. â€˜ë¯¸ìƒâ€™ì€ ë³„ë„ ê·¸ë£¹ 1ê°œë¡œ ëª¨ì´ê±°ë‚˜(ì˜µì…˜), ì œì™¸ í”Œë˜ê·¸ë¡œ ëŒ ìˆ˜ ìˆê²Œ ì˜µì…˜í™”.

## 6) ì°¸ê³  ìŠ¤íƒ€ì¼(ê°„ë‹¨ CSS)

* ì§‘ê³„ ë°°ì§€ ì˜¤ë²„ë ˆì´(`kakao.maps.CustomOverlay`)ëŠ” ì‘ì€ ë¼ìš´ë“œ ì¹´ë“œì— `ì´ë¦„/ê°œìˆ˜` í‘œê¸°.
* í´ë¦­ ì‹œ ì§€ë„ í™•ëŒ€ ë˜ëŠ” ê·¸ë£¹ ëª©ë¡ íŒ¨ë„ ì—´ê¸°(ì´ë²¤íŠ¸ í›…ë§Œ ì—°ê²°).

## 7) ì¸ìˆ˜ ì¤€ë¹„ë¬¼

* `stores` ë°ì´í„°ëŠ” `{ id, name, address, lat, lng }` í˜•íƒœ ê°€ì •.
* í˜„ì¬ í”„ë¡œì íŠ¸ì— ìˆëŠ” `createMarkersInBatch`, `extractRegionFromAddress`ë¥¼ ìœ„ í•¨ìˆ˜ë“¤ë¡œ **ì¹˜í™˜ ë˜ëŠ” ë˜í•‘**í•´ì„œ ë™ì‘í•˜ë„ë¡ ë¦¬íŒ©í† ë§.

---

ìœ„ ìš”êµ¬ëŒ€ë¡œ **êµ¬í˜„ + ê¸°ì¡´ ì½”ë“œì— ì£¼ì… ê°€ëŠ¥í•œ í˜•íƒœë¡œ ë¦¬íŒ©í† ë§**ê¹Œì§€ í•´ì¤˜.
íŠ¹íˆ, **ëª¨ë“œ ì „í™˜ì€ `handleMapLevelChange` í•œ ê³³ì—ì„œë§Œ** ì¼ì–´ë‚˜ê²Œ ë³´ì¥í•˜ê³ ,
ë§ˆì»¤ëŠ” **ì¬ìƒì„± ê¸ˆì§€, show/hideë§Œ** ìˆ˜í–‰í•˜ë„ë¡ ë§Œë“¤ì–´ì¤˜.
