import{_ as d}from"./preload-helper-BXl3LOEh.js";let c,g;try{c=(await d(()=>import("./mapDataRepository-CQ-_fqnd.js"),[])).mapDataRepository}catch(o){console.warn("âš ï¸ mapDataRepository ëª¨ë“ˆ ì„í¬íŠ¸ ì‹¤íŒ¨:",o)}try{g=(await d(()=>import("./mapLevelConverter-B-gJDh-V.js"),[])).mapLevelConverter}catch(o){console.warn("âš ï¸ mapLevelConverter ëª¨ë“ˆ ì„í¬íŠ¸ ì‹¤íŒ¨:",o)}const m={async getViewportStores(o){if(!o)throw new Error("ì§€ë„ ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤");const e=o.getBounds(),r=o.getZoom(),a=g?g.naverZoomToKakaoLevel(r):Math.max(1,Math.min(14,28-r)),t=e.getSW?e.getSW():e._sw,n=e.getNE?e.getNE():e._ne,s=`${t.lng()},${t.lat()},${n.lng()},${n.lat()}`;console.log(`ğŸ“± ë§¤ì¥ ë°ì´í„° ì¡°íšŒ: ë„¤ì´ë²„ì¤Œ=${r} â†’ ì¹´ì¹´ì˜¤ë ˆë²¨=${a}, bbox=${s}`);const i=await c.fetchViewportStores(a,s);if(!i.success)throw new Error(i.error||"ë§¤ì¥ ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨");const p=(i.data||i.features||[]).filter(l=>l.kind==="individual").map(l=>this.transformStoreData(l)).filter(Boolean);return console.log(`âœ… ë§¤ì¥ ë°ì´í„° ë³€í™˜ ì™„ë£Œ: ${p.length}ê°œ`),p},async performUnifiedSearch(o,e){if(!o.trim())return{stores:[],places:[]};console.log(`ğŸ” í†µí•© ê²€ìƒ‰: "${o}"`);const r=e.getCenter(),[a,t]=await Promise.all([c.searchStores(o),c.searchPlaces(o,r.y,r.x)]),n=a.stores||[],s=t.success?t.documents||[]:[];return console.log(`ğŸ“Š ê²€ìƒ‰ ê²°ê³¼: ë§¤ì¥ ${n.length}ê°œ, ì¥ì†Œ ${s.length}ê°œ`),{stores:n,places:s}},async processLocationSetting(o,e,r){throw console.log(`ğŸ“ ìœ„ì¹˜ ì„¤ì • ê¸°ëŠ¥ì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤: ${o} ${e} ${r}`),new Error("ìœ„ì¹˜ ì„¤ì • ê¸°ëŠ¥ì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤")},async getRegionData(o,e={}){throw console.log(`ğŸ“ ì§€ì—­ ë°ì´í„° ë¡œë“œ ê¸°ëŠ¥ì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤: ${o}`),new Error("ì§€ì—­ ë°ì´í„° ë¡œë“œ ê¸°ëŠ¥ì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤")},async updateCurrentLocationInfo(o){return console.log("ğŸ“ í˜„ì¬ ìœ„ì¹˜ ì •ë³´ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤"),"ì§€ë„"},transformStoreData(o){let e=o.id||o.store_id;if(typeof e=="string"&&!isNaN(e)&&(e=parseInt(e,10)),!e||e<=0)return console.error("âŒ ìœ íš¨í•˜ì§€ ì•Šì€ ë§¤ì¥ ID:",o),null;const r={id:e,store_id:e,name:o.name||"ë§¤ì¥ëª… ì—†ìŒ",category:o.category||"ê¸°íƒ€",address:`${o.sido||""} ${o.sigungu||""} ${o.eupmyeondong||""}`.trim()||"ì£¼ì†Œ ì •ë³´ ì—†ìŒ",ratingAverage:o.rating_average?parseFloat(o.rating_average):0,reviewCount:o.review_count||0,favoriteCount:0,isOpen:o.is_open!==!1,coord:{lat:parseFloat(o.lat),lng:parseFloat(o.lng)},region:{sido:o.sido,sigungu:o.sigungu,eupmyeondong:o.eupmyeondong}};return console.log("âœ… í‘œì¤€í™”ëœ storeData ìƒì„±:",{id:r.id,name:r.name,category:r.category,isOpen:r.isOpen}),r},validateStoreData(o){return o?["id","name","coord"].every(r=>r==="coord"?o.coord&&typeof o.coord.lat=="number"&&typeof o.coord.lng=="number":o.hasOwnProperty(r)&&o[r]):!1},normalizeToStoreData(o){return this.validateStoreData(o)?o:this.transformStoreData(o)}};typeof window<"u"&&(window.mapService=m);export{m as mapService};
