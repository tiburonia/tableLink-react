
<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TableLink KRP - ì£¼ë°© í”„ë¦°í„°</title>
  <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
</head>

<body>
  <!-- í™”ë©´ì„ ë Œë”ë§í•  ë©”ì¸ ì˜ì—­ -->
  <div id='main'></div>

  <!-- KRP ë Œë”ë§ í•¨ìˆ˜ -->
  <script src="/krp/components/renderKRP.js"></script>

  <script>
    // KRP í˜ì´ì§€ ì´ˆê¸° ì§„ì…
    document.addEventListener('DOMContentLoaded', function() {
      console.log('ğŸ–¨ï¸ KRP í˜ì´ì§€ DOM ë¡œë“œ ì™„ë£Œ');

      // URLì—ì„œ storeId ì¶”ì¶œ
      const urlParams = new URLSearchParams(window.location.search);
      const storeId = urlParams.get('storeId');

      if (!storeId) {
        console.error('âŒ storeIdê°€ ì—†ìŠµë‹ˆë‹¤');
        document.getElementById('main').innerHTML = `
          <div style="padding: 40px; text-align: center; color: red;">
            <h2>âŒ ì˜¤ë¥˜</h2>
            <p>ë§¤ì¥ IDê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>
            <button onclick="history.back()">ëŒì•„ê°€ê¸°</button>
          </div>
        `;
        return;
      }

      // KRP ë Œë”ë§ í•¨ìˆ˜ ì‹¤í–‰
      if (typeof renderKRP === 'function') {
        renderKRP(storeId);
      } else {
        console.error('âŒ renderKRP í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
        document.getElementById('main').innerHTML = `
          <div style="padding: 40px; text-align: center; color: red;">
            <h2>âŒ ì˜¤ë¥˜</h2>
            <p>KRP ì‹œìŠ¤í…œì„ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
            <button onclick="history.back()">ëŒì•„ê°€ê¸°</button>
          </div>
        `;
      }
    });
  </script>
</body>

</html>
