
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KDS - Kitchen Display System</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #0f1419 0%, #1a1a2e 100%);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            color: white;
            overflow: hidden;
        }

        .initial-loading {
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            background: linear-gradient(135deg, #0f1419 0%, #1a1a2e 100%);
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(79, 195, 247, 0.3);
            border-top: 4px solid #4fc3f7;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: #4fc3f7;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .loading-subtext {
            color: #90a4ae;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <!-- ì´ˆê¸° ë¡œë”© í™”ë©´ -->
    <div class="initial-loading" id="initialLoading">
        <div class="loading-spinner"></div>
        <div class="loading-text">ğŸ“Ÿ KDS ì‹œìŠ¤í…œ ë¡œë”© ì¤‘...</div>
        <div class="loading-subtext">Kitchen Display System v2.0</div>
    </div>

    <!-- ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ -->
    <div id="main"></div>

    <script>
        console.log('ğŸ“Ÿ KDS í˜ì´ì§€ DOM ë¡œë“œ ì™„ë£Œ');

        // KDS ì‹œìŠ¤í…œ ì´ˆê¸°í™”
        async function initKDSSystem() {
            try {
                console.log('ğŸ”„ KDS ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì‹œì‘');
                
                // ëª¨ë“ˆ ë¡œë“œ
                console.log('ğŸ“¦ KDS ëª¨ë“ˆ ë¡œë“œ ì¤‘...');
                
                const script = document.createElement('script');
                script.src = '/kds/components/kds/renderKDS.js';
                script.type = 'text/javascript';
                
                script.onload = async function() {
                    console.log('âœ… KDS ëª¨ë“ˆ ë¡œë“œ ì™„ë£Œ');
                    
                    // ì´ˆê¸° ë¡œë”© í™”ë©´ ìˆ¨ê¸°ê¸°
                    const initialLoading = document.getElementById('initialLoading');
                    if (initialLoading) {
                        initialLoading.style.display = 'none';
                    }
                    
                    // KDS ì‹œìŠ¤í…œ ì‹œì‘
                    if (typeof window.renderKDS === 'function') {
                        await window.renderKDS();
                        console.log('âœ… KDS ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ');
                    } else {
                        throw new Error('KDS ë Œë”ë§ í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                    }
                };
                
                script.onerror = function() {
                    console.error('âŒ KDS ëª¨ë“ˆ ë¡œë“œ ì‹¤íŒ¨');
                    showKDSLoadError();
                };
                
                document.head.appendChild(script);
                
            } catch (error) {
                console.error('âŒ KDS ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                showKDSLoadError();
            }
        }

        // KDS ë¡œë“œ ì—ëŸ¬ í™”ë©´
        function showKDSLoadError() {
            const main = document.getElementById('main');
            const initialLoading = document.getElementById('initialLoading');
            
            if (initialLoading) {
                initialLoading.style.display = 'none';
            }
            
            main.innerHTML = `
                <div class="load-error">
                    <div class="error-content">
                        <div class="error-icon">ğŸ’¥</div>
                        <h1>KDS ì‹œìŠ¤í…œ ë¡œë“œ ì‹¤íŒ¨</h1>
                        <p>ì‹œìŠ¤í…œ ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
                        <button onclick="window.location.reload()" class="retry-btn">
                            ğŸ”„ ìƒˆë¡œê³ ì¹¨
                        </button>
                    </div>
                </div>

                <style>
                    .load-error {
                        width: 100vw;
                        height: 100vh;
                        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
                        color: white;
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    }

                    .error-content {
                        text-align: center;
                        padding: 40px;
                    }

                    .error-icon {
                        font-size: 4rem;
                        margin-bottom: 20px;
                    }

                    .error-content h1 {
                        color: #f44336;
                        margin-bottom: 16px;
                        font-size: 2rem;
                    }

                    .error-content p {
                        color: #90a4ae;
                        margin-bottom: 30px;
                        font-size: 16px;
                    }

                    .retry-btn {
                        background: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 100%);
                        color: white;
                        border: none;
                        padding: 16px 32px;
                        border-radius: 10px;
                        cursor: pointer;
                        font-weight: 600;
                        font-size: 16px;
                        transition: all 0.3s ease;
                    }

                    .retry-btn:hover {
                        transform: translateY(-2px);
                    }
                </style>
            `;
        }

        // DOM ë¡œë“œ ì™„ë£Œ í›„ KDS ì‹œìŠ¤í…œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', initKDSSystem);
        
        // í˜ì´ì§€ ê°€ì‹œì„± ë³€ê²½ ì‹œ ìƒˆë¡œê³ ì¹¨
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden && window.refreshKDS) {
                console.log('ğŸ“± í˜ì´ì§€ í™œì„±í™” - KDS ìƒˆë¡œê³ ì¹¨');
                window.refreshKDS();
            }
        });
        
    </script>
</body>
</html>
