<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TableLink POS - í¬ìŠ¤ê¸°</title>
  <style>
    /* POS ì „ìš© ì „ì²´ í™”ë©´ ìŠ¤íƒ€ì¼ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      background: #f1f5f9;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      overflow: hidden;
    }

    #main {
      width: 100vw;
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
      background: #f1f5f9;
      overflow: hidden;
      transform: none;
      box-shadow: none;
      border: none;
    }

    /* POS ì „ìš© ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f5f9;
    }

    ::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #94a3b8;
    }

    /* ì¹´íŠ¸ ìœ„ì ¯ ìˆ¨ê¹€ (POSì—ì„œëŠ” ë¶ˆí•„ìš”) */
    #cartWidget {
      display: none !important;
    }
  </style>
</head>
<body>
  <div id="main"></div>

  <!-- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
  <script src="/socket.io/socket.io.js"></script>

  <!-- ê³µí†µ ìœ í‹¸ë¦¬í‹° -->
  <script src="/shared/utils/logOut.js"></script>
  <script src="/shared/utils/localStorage.js"></script>

  <!-- POS ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ë“¤ -->
  <script src="/pos/utils/posSocket.js"></script>
  <script src="/pos/components/pos/sessionManager.js"></script>
  <script src="/pos/components/pos/advancedPayment.js"></script>
  <script src="/pos/components/pos/tableMap.js"></script>
  <script src="/pos/components/pos/tableDetailPanel.js"></script>
  <script src="/pos/components/pos/detailPanel.js"></script>
  <script src="/pos/components/pos/orderModal.js"></script>
  <script src="/pos/components/pos/paymentModal.js"></script>

  <!-- POS ES6 ëª¨ë“ˆë“¤ -->
  <script type="module" src="/pos/components/pos/modules/posStateManager.js"></script>
  <script type="module" src="/pos/components/pos/modules/posDataLoader.js"></script>
  <script type="module" src="/pos/components/pos/modules/posTableManager.js"></script>
  <script type="module" src="/pos/components/pos/modules/posMenuManager.js"></script>
  <script type="module" src="/pos/components/pos/modules/posOrderManager.js"></script>
  <script type="module" src="/pos/components/pos/modules/posPaymentManager.js"></script>
  <script type="module" src="/pos/components/pos/modules/posTempStorage.js"></script>
  <script type="module" src="/pos/components/pos/modules/posUIRenderer.js"></script>
  <script type="module" src="/pos/components/pos/renderPOS.js"></script>

  <script type="module">
    document.addEventListener('DOMContentLoaded', async () => {
      console.log('ğŸš€ TableLink POS ì‹œìŠ¤í…œ ì‹œì‘');

      // ì „ì—­ ìƒíƒœ ì´ˆê¸°í™”
      window.currentStore = null;
      window.currentTable = null;
      window.allMenus = [];
      window.allTables = [];
      window.homeMode = 'table_map';
      window.currentOrderItems = [];
      window.currentTLLOrder = null;

      try {
        // ES6 ëª¨ë“ˆì—ì„œ renderPOS í•¨ìˆ˜ import
        const { renderPOS } = await import('/pos/components/pos/renderPOS.js');
        if (typeof renderPOS === 'function') {
          renderPOS();
        } else {
          console.error('âŒ renderPOS í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
        }
      } catch (error) {
        console.error('âŒ POS ëª¨ë“ˆ ë¡œë“œ ì‹¤íŒ¨:', error);
      }
    });
  </script>
</body>
</html>