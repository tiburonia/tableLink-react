<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TableLink - ë©”ì¸</title>

  <!--ë„¤ì´ë²„ë§µ API-->
  <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=ejmti6owy5"></script>

  <!--ì „ì—­ CSS íŒŒì¼-->
  <link rel="stylesheet" href="shared/css/favoriteStore.css" />
  <link rel="stylesheet" href="shared/css/globalBody.css" />
  <link rel="stylesheet" href="shared/css/renderLogin.css" />
  <!--ì„œë¸Œë©”ì¸ CSS ì¶”ê°€-->
  <link rel="stylesheet" href="TLG/styles/subMain.css" />
</head>

<body>
  <!-- í™”ë©´ì„ ë Œë”ë§í•  ë©”ì¸ ì˜ì—­ -->
  <div id='main'></div>
  <!-- ì¥ë°”êµ¬ë‹ˆ ìœ„ì ¯ -->
  <div id='cartWidget'></div>

  <!--íšŒì›ê°€ì… í™”ë©´ ë Œë”ë§ í•¨ìˆ˜ (ë¡œê·¸ì¸ë³´ë‹¤ ë¨¼ì € ë¡œë“œ)-->
  <script src="TLG/pages/auth/renderSignUp.js"></script>
  <!--ë§ˆì´í˜ì´ì§€ í™”ë©´ ë Œë”ë§ í•¨ìˆ˜ (ë¨¼ì € ë¡œë“œ)-->
  <script src="TLG/pages/mypage/renderMyPage.js"></script>
  <!--ë¡œê·¸ì¸ í™”ë©´ ë Œë”ë§ í•¨ìˆ˜-->
  <script type="module" src="/TLG/pages/auth/renderLogin.js"></script>
  <!--ë‚´ ê³„ì • í™”ë©´ ë Œë”ë§ í•¨ìˆ˜-->
  <script src="TLG/pages/mypage/renderMyAccount.js"></script>
  <!-- ì£¼ë¬¸ ê´€ë ¨ -->
  <script src="/TLG/pages/store/views/order/renderAllOrderHTML.js"></script>

  <!-- ë¦¬ë·° ê´€ë ¨ -->
  <script type="module" src="/TLG/pages/store/views/review/renderReviewWrite.js"></script>
  <link rel="stylesheet" href="/TLG/pages/store/views/review/css/reviewWrite.css">

  <!-- ì¦ê²¨ì°¾ê¸° ê´€ë ¨ -->
  <script type="module" src="/TLG/pages/store/views/favoriteButtonView.js"></script>
  <script type="module" src="/TLG/pages/store/services/favoriteService.js"></script>

  <!-- ë¦¬ë·° ì „ì²´ë³´ê¸° -->
  <script src="/TLG/pages/store/views/review/renderAllReview.js"></script>

  <!-- ë¦¬ë·° ê´€ë¦¬ì ë° ë¯¸ë¦¬ë³´ê¸° (ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜) -->
  <script type="module" src="/TLG/pages/store/repositories/reviewDataRepository.js"></script>
  <script type="module" src="/TLG/pages/store/views/reviewPreviewView.js"></script>
  <script type="module" src="/TLG/pages/store/controllers/reviewPreviewController.js"></script>

  <!-- í”„ë¡œëª¨ì…˜ ìƒì„¸ -->
  <script src="/TLG/pages/store/views/promotion/renderPromotionDetail.js"></script>
  <!--ì§€ë„ ëª¨ë“ˆë“¤-->
  <script src="TLG/pages/main/modules/mapPanelUI.js"></script>
  <script src="TLG/pages/main/modules/mapMarkerManager.js"></script>
  <!--ì§€ë„ í™”ë©´ ë Œë”ë§ í•¨ìˆ˜-->
  <script type="module" src="TLG/pages/main/renderMap.js"></script>
  <script type="module" src="TLG/pages/main/renderSearch.js"></script>
  <!--ì•Œë¦¼ í™”ë©´ ë Œë”ë§ í•¨ìˆ˜-->
  <script src="TLG/pages/main/renderNotification.js"></script>
  <!--ì¦ê²¨ì°¾ê¸° ê¸°ëŠ¥ (ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜) - ìœ„ì—ì„œ ì´ë¯¸ ë¡œë“œë¨, ì¤‘ë³µ ì œê±°-->
  <script type="module" src="TLG/pages/store/repositories/favoriteRepository.js"></script>
  <script type="module" src="TLG/pages/store/controllers/favoriteController.js"></script>
  <!--ë§¤ì¥ë Œë”ë§ ëª¨ë“ˆë“¤-->
  <!-- storePanelManagerëŠ” ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ -->
  <!--íŒ¨ë„ ê´€ë¦¬ (ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜)-->
  <script type="module" src="/TLG/pages/store/repositories/panelRepository.js"></script>
  <script type="module" src="/TLG/pages/store/services/panelService.js"></script>
  <script type="module" src="/TLG/pages/store/views/modules/panelView.js"></script>
  <script type="module" src="/TLG/pages/store/controllers/panelController.js"></script>
  <!--ë¦¬ë·° í”„ë¦¬ë·° (ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜) - ìœ„ì—ì„œ ì´ë¯¸ ë¡œë“œë¨, ì¤‘ë³µ ì œê±°-->
  <script type="module" src="/TLG/pages/store/services/reviewDataService.js"></script>
  <!--ë§¤ì¥ íƒ­ ë·° (ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜)-->
  <script type="module" src="/TLG/pages/store/views/tabs/homeTabView.js"></script>
  <script type="module" src="/TLG/pages/store/views/tabs/menuTabView.js"></script>
  <script type="module" src="/TLG/pages/store/views/tabs/reviewTabView.js"></script>
  <script type="module" src="/TLG/pages/store/views/tabs/storeInfoTabView.js"></script>
  <script type="module" src="/TLG/pages/store/views/tabs/regularTabView.js"></script>
  <!--ë§¤ì¥ ì¶”ê°€ ì •ë³´ (ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜)-->
  <script type="module" src="/TLG/pages/store/repositories/storeInfoRepository.js"></script>
  <script type="module" src="/TLG/pages/store/services/storeInfoService.js"></script>
  <script type="module" src="/TLG/pages/store/views/modules/storeAdditionalInfoHTML.js"></script>
  <!--í…Œì´ë¸” ê´€ë¦¬ (ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜)-->
  <script type="module" src="/TLG/pages/store/repositories/tableRepository.js"></script>
  <script type="module" src="/TLG/pages/store/services/tableService.js"></script>
  <script type="module" src="/TLG/pages/store/views/tableStatusView.js"></script>

  <script type="module" src="/TLG/pages/store/services/storeEventService.js"></script>

  <script type="module" src="/TLG/pages/store/controllers/tableController.js"></script>
  <!--TLL ê´€ë¦¬ (ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜)-->
  <script type="module" src="/TLG/pages/store/controllers/tllController.js"></script>
  <!--ë§¤ì¥ë Œë”ë§ í•¨ìˆ˜ (ìš°ì„  ë¡œë”©)-->
  <script src="TLG/pages/store/renderStore.js"></script>
  <!--ê²°ì œ í™”ë©´ ë Œë”ë§ í•¨ìˆ˜ (ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜)-->
  <script type="module" src="TLG/pages/pay/renderPay.js"></script>
  <!--ì¿ í° ë°œê¸‰ í•¨ìˆ˜-->
  <script src="TLG/utils/creatCoupon.js"></script>
  <!--ê²°ì œ ì™„ë£Œ í™”ë©´ ë Œë”ë§ í•¨ìˆ˜ (ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜)-->
  <script type="module" src="TLG/pages/pay/confirmPayF.js"></script>
  <!--ì£¼ë¬¸ í™”ë©´ ë Œë”ë§ í•¨ìˆ˜ (ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜)-->
  <script type="module" src="TLG/pages/pay/renderOrderScreen.js"></script>
  <!--ì˜ˆì•½ í™”ë©´ ë Œë”ë§ í•¨ìˆ˜-->
  <script src="TLG/pages/store/renderReservationScreen.js"></script>
  <!--ë©”ë‰´ ëª¨ë“ˆ-->
  <script type="module" src="/TLG/pages/store/views/modules/menuHTML.js"></script>

  <!--ë§¤ì¥ ìºì‹œ ì‹œìŠ¤í…œ-->
  <script src="TLG/utils/storeCache.js"></script>
  <script src="/TLG/utils/globalKeyboardEvents.js"></script>
  <script src="/TLG/utils/regularLevelManager.js"></script>
  <!-- í˜œíƒ ìƒì„¸ë³´ê¸° ìŠ¤í¬ë¦½íŠ¸ - ìœ„ì—ì„œ ì´ë¯¸ ë¡œë“œë¨, ì¤‘ë³µ ì œê±° -->
  <!-- ì„œë¸Œ ë©”ì¸ í™”ë©´ ë Œë”ë§ í•¨ìˆ˜ (ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜) -->
  <script type="module" src="TLG/pages/main/repositories/subMainRepository.js"></script>
  <script type="module" src="TLG/pages/main/services/subMainService.js"></script>
  <script type="module" src="TLG/pages/main/views/subMainView.js"></script>
  <script type="module" src="TLG/pages/main/controllers/subMainController.js"></script>
  <script type="module" src="TLG/pages/main/renderSubMain.js"></script>
  <script type="module" src="TLG/pages/pay/TLL.js"></script>

  <!-- ì•± ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ (AuthManagerì—ì„œ ì œê³µ) -->
  <script type="module">
    import { initializeApp } from '/TLG/utils/authManager.js';

    document.addEventListener('DOMContentLoaded', function() {
      console.log('ğŸ”„ DOM ë¡œë“œ ì™„ë£Œ, ì•± ì´ˆê¸°í™” ì‹œì‘');

      if (typeof initializeApp === 'function') {
        console.log('âœ… initializeApp í•¨ìˆ˜ ë°œê²¬, ì‹¤í–‰ ì¤‘...');
        initializeApp();
      } else {
        console.error('âŒ initializeApp í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
        // í´ë°±ìœ¼ë¡œ ì§ì ‘ ë¡œê·¸ì¸ í™”ë©´ ë Œë”ë§
        setTimeout(() => {
          if (typeof renderLogin === 'function') {
            console.log('ğŸ”„ í´ë°±: renderLogin í•¨ìˆ˜ ì‹¤í–‰');
            renderLogin();


          } else {
            console.error('âŒ renderLogin í•¨ìˆ˜ë„ ì°¾ì„ ìˆ˜ ì—†ìŒ');
            document.getElementById('main').innerHTML = '<div style="padding: 20px; text-align: center;">ì•±ì„ ë¡œë”©í•˜ëŠ” ì¤‘...</div>';
          }
        }, 100);
      }
    });
  </script>

  <script>
    // í† ìŠ¤í˜ì´ë¨¼ì¸  íŒì—…ì°½ìœ¼ë¡œë¶€í„° ë©”ì‹œì§€ ìˆ˜ì‹ 
    window.addEventListener('message', function(event) {
      console.log('ğŸ“¨ ë©”ì‹œì§€ ìˆ˜ì‹ :', event.data);

      if (event.data && event.data.action) {
        switch (event.data.action) {
          case 'navigate':
            console.log('ğŸ”„ í˜ì´ì§€ ì´ë™:', event.data.url);
            window.location.href = event.data.url;
            break;

          case 'payment-success':
            console.log('âœ… ê²°ì œ ì„±ê³µ ì•Œë¦¼:', event.data);
            // í•„ìš”ì‹œ ì¶”ê°€ ì²˜ë¦¬ ë¡œì§
            break;

          default:
            console.log('â„¹ï¸ ì•Œ ìˆ˜ ì—†ëŠ” ì•¡ì…˜:', event.data.action);
        }
      }
    }, false);
  </script>
</body>

</html>